<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>YouTube Playlist Carousel - 150s</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: black; font-family: sans-serif; }
        #player { width: 100vw; height: 100vh; }
        
        /* Barra di progressione superiore */
        #progress-container { 
            position: absolute; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 6px; 
            background: rgba(255,255,255,0.1); 
            z-index: 100; 
        }
        #progress-bar { 
            width: 100%; 
            height: 100%; 
            background: #ff0000; 
            transition: width 1s linear; 
        }
    </style>
</head>
<body>
    <div id="progress-container"><div id="progress-bar"></div></div>
    <div id="player"></div>

    <script>
        // --- CONFIGURAZIONE ---
        const myPlaylistId = 'PLhNnjrSmvk-NC1dFuMu1T4qonEkt9L1vP'; // <--- Inserisci qui il tuo ID Playlist
        const changeEverySeconds = 150; // <--- IMPOSTATO A 150 SECONDI
        
        let player;
        let secondsRemaining = changeEverySeconds;

        // Caricamento API YouTube
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        document.head.appendChild(tag);

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                playerVars: {
                    listType: 'playlist',
                    list: myPlaylistId,
                    autoplay: 1,
                    mute: 1,
                    controls: 0,
                    modestbranding: 1,
                    rel: 0,
                    origin: window.location.origin
                },
                events: {
                    'onReady': onPlayerReady,
                    'onError': skipToNext
                }
            });
        }

        function onPlayerReady(event) {
            event.target.playVideo();
            startTimer();
        }

        function startTimer() {
            setInterval(() => {
                secondsRemaining--;
                
                // Aggiorna la barra rossa in tempo reale
                const percent = (secondsRemaining / changeEverySeconds) * 100;
                document.getElementById('progress-bar').style.width = percent + "%";

                if (secondsRemaining <= 0) {
                    skipToNext();
                }
            }, 1000);
        }

        function skipToNext() {
            player.nextVideo(); // Passa al prossimo video della playlist
            secondsRemaining = changeEverySeconds;
            document.getElementById('progress-bar').style.width = "100%";
        }
    </script>
</body>
</html>